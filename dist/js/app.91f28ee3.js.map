{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/components/Lab1.vue?0ed2","webpack:///./src/components/Lab0.vue?64ce","webpack:///./src/App.vue?24f4","webpack:///./src/components/Lab0.vue?7df3","webpack:///./src/Utils/Files.ts","webpack:///./src/Utils/Rng.ts","webpack:///./src/components/Lab0.vue","webpack:///./src/components/Lab0.vue?c2f5","webpack:///./src/components/Lab0.vue?4976","webpack:///./src/components/Lab1.vue?b3f3","webpack:///./src/Utils/Vector2.ts","webpack:///./src/components/Lab1.vue","webpack:///./src/components/Lab1.vue?6cb9","webpack:///./src/components/Lab1.vue?c2cd","webpack:///./src/components/Lab2.vue?a045","webpack:///./src/Utils/Others.ts","webpack:///./src/Utils/Matrix.ts","webpack:///./src/components/Lab2.vue","webpack:///./src/components/Lab2.vue?c29b","webpack:///./src/components/Lab2.vue?e590","webpack:///./src/App.vue","webpack:///./src/App.vue?0ab4","webpack:///./src/App.vue?bff9","webpack:///./src/main.ts","webpack:///./src/components/Lab2.vue?506b"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","staticRenderFns","_v","_s","currentCanvasWidth","currentCanvasHeight","model","callback","$$v","newCanvasHeight","expression","newCanvasWidth","on","resizeCanvas","imgFile","drawImage","saveImage","invertColors","drawRandomLine","canvasId","saveBlobAsFile","blob","link","document","createElement","download","href","URL","createObjectURL","click","revokeObjectURL","getRandomInt","min","max","rand","Math","random","round","getRandomIntVector","resultVector","Array","newSizeChanged","getElementById","console","log","imageName","size","image","Image","src","onload","canvas","context","getContext","width","height","fillStyle","fillRect","toBlob","Height","Width","Number","parseInt","imageData","getImageData","putImageData","lineCount","x","y","beginPath","moveTo","lineTo","stroke","gradient","createRadialGradient","addColorStop","component","$event","type","indexOf","_k","keyCode","arguments","backgroundImageFile","points","deletePoints","drawDebugPoints","addPoint","sqrt","otherVector","multiplier","divider","Vector2","backgroundImage","imageIsLoaded","newFile","Name","Size","newImage","redraw","drawBackground","point","drawPoint","drawSpline","color","radius","strokeStyle","arc","PI","closePath","anchorPoints","calculateAnchorPoints","context2D","bezierCurveTo","ev","domRect","getBoundingClientRect","clientX","left","clientY","top","lastCenterA","copy","add","divide","lastLength","subtract","centerA","bv","multiply","anchorPoint","parseFloat","scaleX","scaleY","sourceImageFile","sourcePoints","resultPoints","calculateResultImage","text","sourceMode","useFiltration","_l","_m","$set","_e","sourceCanvasId","onSourceCanvasClicked","resultCanvasId","nameOf","multiplyMatrixToMatrix","A","B","rowsA","colsA","rowsB","colsB","C","k","getAdjugateMatrix","M","N","adjA","sign","getDeterminant","denom","exchanges","maxN","maxValue","abs","temp","value1","value2","getInverseMatrix","det","sourceImage","sourceCanvas","addSourcePoint","addResultPoint","drawSourceImage","G","map","v","G1","inverseG1","inverseG","inverseA","sourceWidth","sourceHeight","sourceCorners","mappedSourceCorners","corner","resultBounds","maxX","reduce","prev","Infinity","maxY","minX","minY","resultCanvas","resultCanvasOffset","resultWidth","resultHeight","sourceContext","sourceImageData","resultContext","resultImageData","getSourceI","getResultI","resultX","resultY","sourceX","sourceY","xK","yK","resultI","arr","floor","ceil","pow","log2","m2","flooredSourceXm","flooredSourceYm","flooredSourceXm2","flooredSourceYm2","colorM","index","colorM2","sourceI","drawPoints","options","deep","components","Lab2","Lab1","Lab0","config","productionTip","use","render","h","$mount"],"mappings":"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","file":"js/app.91f28ee3.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Lab1.vue?vue&type=style&index=0&lang=scss&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Lab0.vue?vue&type=style&index=0&lang=scss&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"vh-100\",attrs:{\"id\":\"app\"}},[_c('b-tabs',{staticClass:\"full-height-tabs\",attrs:{\"pills\":\"\",\"card\":\"\",\"nav-wrapper-class\":\"bg-dark\"}},[_c('b-tab',{staticClass:\"p-0\",attrs:{\"title\":\"Лаб 0\",\"active\":\"\",\"title-link-class\":\"text-white\"}},[_c('lab0')],1),_c('b-tab',{staticClass:\"p-0\",attrs:{\"title\":\"Лаб 1\",\"title-link-class\":\"text-white\"}},[_c('lab1')],1),_c('b-tab',{staticClass:\"p-0\",attrs:{\"title\":\"Лаб 2\",\"title-link-class\":\"text-white\"}},[_c('lab2')],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container-fluid h-100\"},[_c('div',{staticClass:\"row h-100\"},[_c('div',{staticClass:\"col h-100 p-3\"},[_c('h6',[_vm._v(\"Current canvas size is \"+_vm._s(_vm.currentCanvasWidth)+\"X\"+_vm._s(_vm.currentCanvasHeight)+\"px\")]),_c('b-form-group',[_c('b-input-group',{attrs:{\"prepend\":\"Height\",\"append\":\"px\",\"size\":\"sm\"}},[_c('b-form-input',{attrs:{\"type\":\"number\",\"min\":\"0\",\"step\":\"1\"},model:{value:(_vm.newCanvasHeight),callback:function ($$v) {_vm.newCanvasHeight=$$v},expression:\"newCanvasHeight\"}})],1)],1),_c('b-form-group',[_c('b-input-group',{attrs:{\"prepend\":\"Width\",\"append\":\"px\",\"size\":\"sm\"}},[_c('b-form-input',{attrs:{\"type\":\"number\",\"min\":\"0\",\"step\":\"1\"},model:{value:(_vm.newCanvasWidth),callback:function ($$v) {_vm.newCanvasWidth=$$v},expression:\"newCanvasWidth\"}})],1)],1),_c('b-form-group',[_c('b-button',{attrs:{\"size\":\"sm\"},on:{\"click\":_vm.resizeCanvas}},[_vm._v(\"Resize canvas\")])],1),_c('b-form-group',[_c('b-form-file',{attrs:{\"accept\":\"image/jpeg, image/png\",\"size\":\"sm\"},model:{value:(_vm.imgFile),callback:function ($$v) {_vm.imgFile=$$v},expression:\"imgFile\"}})],1),_c('b-form-group',[_c('b-button',{attrs:{\"size\":\"sm\"},on:{\"click\":_vm.drawImage}},[_vm._v(\"Draw image\")])],1),_c('b-form-group',[_c('b-button',{attrs:{\"size\":\"sm\"},on:{\"click\":_vm.saveImage}},[_vm._v(\"Save image\")])],1),_c('b-form-group',[_c('b-button',{attrs:{\"size\":\"sm\"},on:{\"click\":_vm.invertColors}},[_vm._v(\"Invert colors\")])],1),_c('b-form-group',[_c('b-button',{attrs:{\"size\":\"sm\"},on:{\"click\":_vm.drawRandomLine}},[_vm._v(\"Draw random line\")])],1)],1),_c('div',{staticClass:\"col-9 h-100 bg-secondary canvas-container\"},[_c('canvas',{attrs:{\"id\":_vm.canvasId}})])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","/**\r\n * Сохранить файл в файловую систему\r\n * @param blob объект, который будет сохранён\r\n * @param name имя файла, под которым будет предложено сохранить файл\r\n */\r\nexport function saveBlobAsFile(blob: Blob, name: string) : void {\r\n    const link = document.createElement('a');\r\n    link.download = name;\r\n\r\n    link.href = URL.createObjectURL(blob);\r\n    link.click();\r\n    URL.revokeObjectURL(link.href);\r\n}","/**\r\n * Сгенерировать случайное целое число из множества [min, max]\r\n * @param min минимальное значение\r\n * @param max максимальное значение\r\n */\r\nexport function getRandomInt(min: number, max: number): number {\r\n    const rand = min - 0.5 + Math.random() * (max - min + 1);\r\n    return Math.round(rand);\r\n}\r\n\r\n/**\r\n * Сгенерировать случайный целочисленный вектор\r\n * @param n количество измерений\r\n * @param min массив минимальных значений\r\n * @param max мвссив максимальных значений\r\n */\r\nexport function getRandomIntVector(n: number, min: number[], max: number[]) : number[] {\r\n    const resultVector = new Array<number>(n);\r\n    for (let i = 0; i < n; i++) {\r\n        resultVector[i] = getRandomInt(min[i], max[i]);\r\n    }\r\n    return resultVector;\r\n}","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nimport {Component, Vue, Watch} from \"vue-property-decorator\";\r\nimport {saveBlobAsFile} from \"@/Utils/Files\";\r\nimport {getRandomInt, getRandomIntVector} from \"@/Utils/Rng\";\r\n\r\n@Component\r\nexport default class Lab0 extends Vue {\r\n    public readonly canvasId = \"lab0-canvas\";\r\n    public get canvas() : HTMLCanvasElement {\r\n        return document.getElementById(this.canvasId)! as HTMLCanvasElement;\r\n    }\r\n\r\n    //#region Image\r\n    public imgFile: File|null = null;\r\n\r\n    drawImage() : void {\r\n        if(!this.imgFile) return;\r\n\r\n        console.log('drawImage', {\r\n            imageName: this.imgFile.name,\r\n            size: this.imgFile.size\r\n        })\r\n\r\n        let image = new Image;\r\n        image.src = URL.createObjectURL(this.imgFile);\r\n        image.onload = () => {\r\n            let canvas = this.canvas;\r\n            let context = canvas.getContext('2d')!;\r\n\r\n            this.newCanvasWidth = this.currentCanvasWidth = canvas.width = image.width;\r\n            this.newCanvasHeight = this.currentCanvasHeight = canvas.height = image.height;\r\n            this.newSizeChanged = false;\r\n\r\n            context.fillStyle = \"white\";\r\n            context.fillRect(0, 0, image.width, image.height);\r\n            context.drawImage(image, 0, 0);\r\n\r\n            URL.revokeObjectURL(image.src);\r\n        }\r\n    }\r\n\r\n    saveImage() : void {\r\n        console.log('saveImage');\r\n\r\n        let canvas = this.canvas;\r\n        canvas.toBlob((blob) => {\r\n            if(!blob) return;\r\n            saveBlobAsFile(blob, \"CG result\");\r\n        });\r\n    }\r\n    //#endregion\r\n\r\n    //#region Canvas resizing\r\n    public currentCanvasWidth = 500;\r\n    public currentCanvasHeight = 500;\r\n\r\n    public newCanvasWidth: string|number = 500;\r\n    public newCanvasHeight: string|number = 500;\r\n    public newSizeChanged = false;\r\n\r\n    @Watch('newCanvasHeight')\r\n    onNewCanvasWidthChanged() : void {\r\n        this.newSizeChanged = true;\r\n    }\r\n\r\n    @Watch('newCanvasWidth')\r\n    onNewCanvasHeightChanged() : void {\r\n        this.newSizeChanged = true;\r\n    }\r\n\r\n    resizeCanvas() : void {\r\n        console.log('resizeCanvas', {\r\n            Height: this.newCanvasHeight,\r\n            Width: this.newCanvasWidth\r\n        })\r\n\r\n        let height = typeof this.newCanvasHeight !== \"number\"\r\n            ? Number.parseInt(this.newCanvasHeight)\r\n            : this.newCanvasHeight;\r\n        let width = typeof this.newCanvasWidth !== \"number\"\r\n            ? Number.parseInt(this.newCanvasWidth)\r\n            : this.newCanvasWidth;\r\n\r\n        let canvas = document.getElementById(this.canvasId)! as HTMLCanvasElement;\r\n\r\n        this.currentCanvasHeight = canvas.height = height;\r\n        this.currentCanvasWidth = canvas.width = width;\r\n        this.newSizeChanged = false;\r\n\r\n        // Закрашиваем в белый\r\n        let context = canvas.getContext('2d')!\r\n        context.fillStyle = \"white\";\r\n        context.fillRect(0, 0, width, height);\r\n    }\r\n    //#endregion\r\n\r\n    //#region Color inversion\r\n    invertColors() : void {\r\n        // За основу взял https://www.w3schools.com/tags/canvas_getimagedata.asp\r\n        let canvas = this.canvas;\r\n        let context = canvas.getContext('2d')!;\r\n        let imageData = context.getImageData(0, 0, canvas.width, canvas.height);\r\n\r\n        for (let i = 0; i < imageData.data.length; i += 4) {\r\n            // red\r\n            imageData.data[i] = 255 - imageData.data[i];\r\n            // green\r\n            imageData.data[i + 1] = 255 - imageData.data[i + 1];\r\n            // blue\r\n            imageData.data[i + 2] = 255 - imageData.data[i + 2];\r\n            // alpha\r\n            imageData.data[i + 3] = 255;\r\n        }\r\n\r\n        context.putImageData(imageData, 0, 0);\r\n    }\r\n    //#endregion\r\n\r\n    //#region Random line drawing\r\n    drawRandomLine() : void {\r\n        const canvas = this.canvas;\r\n        const context = canvas.getContext('2d')!;\r\n        const lineCount = getRandomInt(1, 10);\r\n        let [x ,y] = getRandomIntVector(2, [0, 0], [this.currentCanvasWidth, this.currentCanvasHeight]);\r\n        context.beginPath();\r\n        context.moveTo(x, y);\r\n        for (let i = 0; i < lineCount; i++) {\r\n            [x ,y] = getRandomIntVector(2, [0, 0], [this.currentCanvasWidth, this.currentCanvasHeight]);\r\n            context.lineTo(x, y);\r\n        }\r\n        context.stroke();\r\n    }\r\n    //#endregion\r\n\r\n    mounted() : void {\r\n        console.log('mounted', {\r\n            Height: this.currentCanvasHeight,\r\n            Width: this.currentCanvasWidth,\r\n            this: this\r\n        });\r\n\r\n        let canvas = document.getElementById(this.canvasId)! as HTMLCanvasElement;\r\n        let context = canvas.getContext('2d')!;\r\n\r\n        canvas.height = this.currentCanvasHeight;\r\n        canvas.width = this.currentCanvasWidth;\r\n\r\n        let gradient = context.createRadialGradient(\r\n            this.currentCanvasWidth / 2, this.currentCanvasHeight / 2, 5,\r\n            this.currentCanvasWidth / 2, this.currentCanvasHeight / 2, 100);\r\n        gradient.addColorStop(0, \"red\");\r\n        gradient.addColorStop(1, \"white\");\r\n        context.fillStyle = gradient;\r\n        context.fillRect(0, 0, this.currentCanvasWidth, this.currentCanvasHeight);\r\n    }\r\n}\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Lab0.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Lab0.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./Lab0.vue?vue&type=template&id=45f24950&\"\nimport script from \"./Lab0.vue?vue&type=script&lang=ts&\"\nexport * from \"./Lab0.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./Lab0.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container-fluid h-100\"},[_c('div',{staticClass:\"h-100 row\"},[_c('div',{staticClass:\"col h-100 p-3\"},[_c('b-form-group',[_c('b-input-group',{attrs:{\"prepend\":\"(x, y):\",\"size\":\"sm\"}},[_c('b-form-input',{attrs:{\"type\":\"number\",\"min\":\"5\",\"step\":\"1\"},on:{\"keypress\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.resizeCanvas.apply(null, arguments)}},model:{value:(_vm.newCanvasHeight),callback:function ($$v) {_vm.newCanvasHeight=$$v},expression:\"newCanvasHeight\"}}),_c('b-form-input',{attrs:{\"type\":\"number\",\"min\":\"5\",\"step\":\"1\"},on:{\"keypress\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.resizeCanvas.apply(null, arguments)}},model:{value:(_vm.newCanvasWidth),callback:function ($$v) {_vm.newCanvasWidth=$$v},expression:\"newCanvasWidth\"}}),_c('b-input-group-append',[_c('b-input-group-text',[_vm._v(\"px\")]),_c('b-button',{attrs:{\"variant\":_vm.newSizeChanged ? 'primary' : 'secondary'},on:{\"click\":_vm.resizeCanvas}},[_vm._v(\"Обновить\")])],1)],1)],1),_c('b-form-group',[_c('b-form-file',{attrs:{\"accept\":\"image/jpeg, image/png\",\"size\":\"sm\",\"placeholder\":\"Изображение для фона не выбрано\",\"drop-placeholder\":\"Отпустите здесь\",\"browse-text\":\"Выбрать\"},model:{value:(_vm.backgroundImageFile),callback:function ($$v) {_vm.backgroundImageFile=$$v},expression:\"backgroundImageFile\"}})],1),_c('b-form-group',[_c('b-button',{attrs:{\"disabled\":!_vm.points.length,\"variant\":\"danger\",\"size\":\"sm\"},on:{\"click\":_vm.deletePoints}},[_vm._v(\" Удалить точки \")])],1),_c('b-form-group',[_c('b-checkbox',{model:{value:(_vm.drawDebugPoints),callback:function ($$v) {_vm.drawDebugPoints=$$v},expression:\"drawDebugPoints\"}},[_vm._v(\"Отрисовывать отладочные точки\")])],1),_c('b-form-group',[_c('b-button',{attrs:{\"size\":\"sm\"},on:{\"click\":_vm.saveImage}},[_vm._v(\"Сохранить изображение\")])],1)],1),_c('div',{staticClass:\"h-100 bg-secondary canvas-container col-sm-4 col-md-5 col-lg-7 col-xl-9\"},[_c('canvas',{attrs:{\"id\":_vm.canvasId},on:{\"click\":_vm.addPoint}})])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export default class Vector2 {\r\n    public x:number;\r\n    public y:number;\r\n\r\n    public constructor(x: number, y: number) {\r\n        this.x = x;\r\n        this.y = y;\r\n    }\r\n\r\n    public get length(): number {\r\n        return Math.sqrt(this.x * this.x + this.y * this.y);\r\n    }\r\n\r\n    //#region + - * /\r\n    add(otherVector: Vector2): Vector2 {\r\n        this.x += otherVector.x;\r\n        this.y += otherVector.y;\r\n        return this;\r\n    }\r\n\r\n    subtract(otherVector: Vector2): Vector2 {\r\n        this.x -= otherVector.x;\r\n        this.y -= otherVector.y;\r\n        return this;\r\n    }\r\n\r\n    multiply(multiplier: number): Vector2 {\r\n        this.x *= multiplier;\r\n        this.y *= multiplier;\r\n        return this;\r\n    }\r\n\r\n    divide(divider: number): Vector2 {\r\n        this.x /= divider;\r\n        this.y /= divider;\r\n        return this;\r\n    }\r\n    //#endregion\r\n\r\n    public get copy() : Vector2 {\r\n        return new Vector2(this.x, this.y);\r\n    }\r\n}","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nimport {Component, Vue, Watch} from \"vue-property-decorator\";\r\nimport {saveBlobAsFile} from \"@/Utils/Files\";\r\nimport Vector2 from \"@/Utils/Vector2\";\r\n\r\n@Component\r\nexport default class Lab1 extends Vue {\r\n    /** Id канваса. Должно быть уникальным,\r\n     *  иначе компонент будет работать не с тем элементом */\r\n    public readonly canvasId = \"lab1-canvas\";\r\n    public get canvas() : HTMLCanvasElement {\r\n        return document.getElementById(this.canvasId)! as HTMLCanvasElement;\r\n    }\r\n\r\n    //#region Фон\r\n    public backgroundImageFile: File|null = null;\r\n    public backgroundImage: HTMLImageElement|null = null;\r\n    public imageIsLoaded = false;\r\n\r\n    @Watch(\"backgroundImageFile\")\r\n    onBackgroundImageFileChanged(newFile: File|null) : void {\r\n        console.log('BackgroundImageChanged', {\r\n            Name: newFile?.name,\r\n            Size: newFile?.size\r\n        });\r\n\r\n        // Высвобождаем object URL\r\n        if(this.imageIsLoaded) {\r\n            URL.revokeObjectURL(this.backgroundImage!.src);\r\n        }\r\n\r\n        this.imageIsLoaded = false;\r\n        this.backgroundImage = null;\r\n\r\n        if(!newFile) {\r\n            this.redraw();\r\n            return;\r\n        }\r\n\r\n        let newImage = new Image;\r\n        this.backgroundImage = newImage;\r\n        newImage.src = URL.createObjectURL(newFile);\r\n        newImage.onload = () => {\r\n            console.log('image loaded', {\r\n                name: newFile!.name\r\n            })\r\n            // Если файл изображения сменился, пока грузилось это,\r\n            // то надо высвободить object URL\r\n            if(this.backgroundImage !== newImage) {\r\n                URL.revokeObjectURL(newImage.src);\r\n                return;\r\n            }\r\n\r\n            this.imageIsLoaded = true;\r\n            this.redraw()\r\n        }\r\n    }\r\n    //#endregion\r\n\r\n    //#region Рисование\r\n    redraw(): void {\r\n        this.drawBackground();\r\n\r\n        for (const point of this.points) {\r\n            this.drawPoint(point);\r\n        }\r\n\r\n        this.drawSpline();\r\n    }\r\n\r\n    drawBackground() : void {\r\n        console.log('Draw background');\r\n\r\n        const canvas = this.canvas;\r\n        const context = canvas.getContext('2d')!;\r\n\r\n        context.fillStyle = \"white\";\r\n        context.fillRect(0, 0, this.currentCanvasWidth, this.currentCanvasHeight);\r\n\r\n        if(this.imageIsLoaded) context.drawImage(\r\n            this.backgroundImage!,\r\n            0, 0, this.backgroundImage!.width, this.backgroundImage!.height,\r\n            0, 0, canvas.width, canvas.height\r\n        );\r\n    }\r\n\r\n    drawPoint(point: Vector2, color?: string|null) : void {\r\n        const radius = 5;\r\n        color = color || 'red';\r\n\r\n        const context = this.canvas.getContext('2d')!;\r\n        context.strokeStyle = color;\r\n\r\n        context.beginPath();\r\n        context.arc(point.x, point.y, radius, 0, Math.PI*2, false);\r\n        context.closePath();\r\n        context.stroke();\r\n    }\r\n\r\n    drawSpline(): void {\r\n        if(this.points.length < 2) return;\r\n        const anchorPoints = this.calculateAnchorPoints();\r\n\r\n        const context2D = this.canvas.getContext('2d')!;\r\n        context2D.strokeStyle = 'black';\r\n        context2D.beginPath();\r\n        context2D.moveTo(this.points[0].x, this.points[0].y);\r\n        for (let i = 0; i < anchorPoints.length; i++) {\r\n            context2D.bezierCurveTo(\r\n                anchorPoints[i][0].x, anchorPoints[i][0].y,\r\n                anchorPoints[i][1].x, anchorPoints[i][1].y,\r\n                this.points[i+1].x, this.points[i+1].y\r\n            );\r\n        }\r\n        context2D.stroke();\r\n    }\r\n    //#endregion\r\n\r\n    //#region Точки сплайна\r\n    /** Точки, через которые должен проходит сплайн */\r\n    public points: Vector2[] = [];\r\n    public drawDebugPoints = false;\r\n\r\n    @Watch('drawDebugPoints')\r\n    onDrawDebugPointsChanged() : void {\r\n        this.redraw();\r\n    }\r\n\r\n    addPoint(ev: MouseEvent) : void {\r\n        const canvas = this.canvas;\r\n        const domRect = canvas.getBoundingClientRect();\r\n        const x = ev.clientX - domRect.left;\r\n        const y = ev.clientY - domRect.top;\r\n\r\n        const point = new Vector2(x, y);\r\n        this.points.push(point);\r\n        console.log('point was added', {x, y});\r\n\r\n        this.redraw()\r\n    }\r\n\r\n    deletePoints(): void {\r\n        this.points = [];\r\n        this.redraw();\r\n    }\r\n\r\n    /** Расчитать опорные точки для построения сплайна */\r\n    calculateAnchorPoints() : [Vector2, Vector2][] {\r\n        if(this.points.length < 2) return [];\r\n        let anchorPoints = new Array<[Vector2, Vector2]>(this.points.length - 1);\r\n\r\n        let lastCenterA = this.points[1].copy\r\n            .add(this.points[0])\r\n            .divide(2);\r\n        let lastLength = this.points[1].copy\r\n            .subtract(this.points[0])\r\n            .length;\r\n        anchorPoints[0] = [\r\n            this.points[0].copy,\r\n            this.points[1].copy\r\n        ];\r\n        if(this.drawDebugPoints) this.drawPoint(lastCenterA, \"black\");\r\n        for (let i = 2; i < this.points.length; i++) {\r\n            const centerA = this.points[i].copy\r\n                .add(this.points[i - 1])\r\n                .divide(2);\r\n\r\n            if(this.drawDebugPoints) this.drawPoint(centerA, \"black\");\r\n            const length = this.points[i].copy\r\n                .subtract(this.points[i-1])\r\n                .length;\r\n\r\n            const bv = centerA.copy\r\n                .subtract(lastCenterA)\r\n                .multiply(lastLength/(length+lastLength));\r\n\r\n            if(this.drawDebugPoints) this.drawPoint(lastCenterA.copy.add(bv), \"yellow\");\r\n            anchorPoints[i-2][1].subtract(bv);\r\n            anchorPoints[i-1] = [\r\n                anchorPoints[i-2][1].copy\r\n                    .add(centerA)\r\n                    .subtract(lastCenterA),\r\n                this.points[i].copy\r\n            ];\r\n            lastCenterA = centerA;\r\n            lastLength = length;\r\n        }\r\n        if(this.drawDebugPoints)\r\n            for (const anchorPoint of anchorPoints) {\r\n                this.drawPoint(anchorPoint[0], \"blue\");\r\n                this.drawPoint(anchorPoint[1], \"green\");\r\n            }\r\n\r\n        return anchorPoints;\r\n\r\n        /** Центры A отрезков между точками */\r\n        // const centers:Vector2[] = [];\r\n        // for (let i = 1; i < this.points.length; i++) {\r\n        //     const center = this.points[i].copy\r\n        //         .add(this.points[i - 1])\r\n        //         .divide(2);\r\n        //     centers.push(center);\r\n        // }\r\n        //\r\n        // const P: [Vector2, Vector2][] = [];\r\n        // for (let i = 2; i < this.points.length; i++) {\r\n        //     const l1 = this.points[i-1].copy\r\n        //         .subtract(this.points[i-2])\r\n        //         .length;\r\n        //     const l2 = this.points[i].copy\r\n        //         .subtract(this.points[i-1])\r\n        //         .length;\r\n        //     const b = centers[i-1].copy\r\n        //         .subtract(centers[i-2])\r\n        //         .multiply(l1/l2/2)\r\n        //         .add(centers[i-2]);\r\n        //     const v = this.points[i-1].copy\r\n        //         .subtract(b);\r\n        //     const p = [\r\n        //         centers[i-2].copy.add(v),\r\n        //         centers[i-1].copy.add(v)\r\n        //     ];\r\n        //     P.push(p);\r\n        //}\r\n    }\r\n    //#endregion\r\n\r\n    //#region Сохранение изображения\r\n    saveImage() : void {\r\n        console.log('saveImage');\r\n\r\n        let canvas = this.canvas;\r\n        canvas.toBlob((blob) => {\r\n            if(!blob) return;\r\n            saveBlobAsFile(blob, \"CG result\");\r\n        });\r\n    }\r\n    //#endregion\r\n\r\n    //#region Изменение размера\r\n    public currentCanvasWidth = 500;\r\n    public currentCanvasHeight = 500;\r\n\r\n    public newCanvasWidth: string|number = 500;\r\n    public newCanvasHeight: string|number = 500;\r\n    public newSizeChanged = false;\r\n\r\n    @Watch('newCanvasHeight')\r\n    onNewCanvasWidthChanged() : void {\r\n        this.newSizeChanged = true;\r\n    }\r\n\r\n    @Watch('newCanvasWidth')\r\n    onNewCanvasHeightChanged() : void {\r\n        this.newSizeChanged = true;\r\n    }\r\n\r\n    resizeCanvas() : void {\r\n        console.log('resizeCanvas', {\r\n            Height: this.newCanvasHeight,\r\n            Width: this.newCanvasWidth\r\n        });\r\n\r\n        const newCanvasHeight = typeof this.newCanvasHeight !== \"number\"\r\n            ? Number.parseFloat(this.newCanvasHeight)\r\n            : this.newCanvasHeight;\r\n        const newCanvasWidth = typeof this.newCanvasWidth !== \"number\"\r\n            ? Number.parseFloat(this.newCanvasWidth)\r\n            : this.newCanvasWidth;\r\n\r\n        const scaleX = newCanvasWidth / this.currentCanvasWidth;\r\n        const scaleY = newCanvasHeight / this.currentCanvasHeight;\r\n        for (const point of this.points) {\r\n            point.x *= scaleX;\r\n            point.y *= scaleY;\r\n        }\r\n\r\n        const canvas = this.canvas;\r\n\r\n        this.currentCanvasHeight = canvas.height = newCanvasHeight;\r\n        this.currentCanvasWidth = canvas.width = newCanvasWidth;\r\n        this.newSizeChanged = false;\r\n\r\n        this.redraw();\r\n    }\r\n    //#endregion\r\n\r\n    mounted() : void {\r\n        console.log('mounted', {\r\n            Height: this.currentCanvasHeight,\r\n            Width: this.currentCanvasWidth,\r\n            this: this\r\n        });\r\n\r\n        const canvas = this.canvas;\r\n        canvas.height = this.currentCanvasHeight;\r\n        canvas.width = this.currentCanvasWidth;\r\n\r\n        this.redraw();\r\n    }\r\n}\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Lab1.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Lab1.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./Lab1.vue?vue&type=template&id=69389af4&\"\nimport script from \"./Lab1.vue?vue&type=script&lang=ts&\"\nexport * from \"./Lab1.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./Lab1.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container-fluid h-100\"},[_c('div',{staticClass:\"h-100 row\"},[_c('div',{staticClass:\"col h-100 p-3\"},[_c('b-form-group',[_c('b-form-file',{attrs:{\"accept\":\"image/jpeg, image/png\",\"size\":\"sm\",\"placeholder\":\"Изображение для фона не выбрано\",\"drop-placeholder\":\"Отпустите здесь\",\"browse-text\":\"Выбрать\"},model:{value:(_vm.sourceImageFile),callback:function ($$v) {_vm.sourceImageFile=$$v},expression:\"sourceImageFile\"}})],1),_c('b-form-group',[_c('b-button',{attrs:{\"size\":\"sm\"},on:{\"click\":_vm.saveImage}},[_vm._v(\"Сохранить изображение\")])],1),_c('b-form-group',[_c('b-button',{attrs:{\"disabled\":!_vm.sourcePoints.length && !_vm.resultPoints.length,\"variant\":\"danger\",\"size\":\"sm\"},on:{\"click\":_vm.deletePoints}},[_vm._v(\" Удалить точки \")])],1),_c('b-form-group',[_c('b-button',{attrs:{\"disabled\":!_vm.sourcePoints.length || !_vm.resultPoints.length || !_vm.imageIsLoaded,\"variant\":\"primary\",\"size\":\"sm\"},on:{\"click\":_vm.calculateResultImage}},[_vm._v(\" Расчитать изображение \")])],1),_c('b-form-group',{attrs:{\"label\":\"Ставить точки\"}},[_c('b-form-radio-group',{attrs:{\"options\":[{text:'исходного', value: true}, {text:'итогового', value: false}],\"button-variant\":\"outline-primary\",\"size\":\"sm\",\"buttons\":\"\"},model:{value:(_vm.sourceMode),callback:function ($$v) {_vm.sourceMode=$$v},expression:\"sourceMode\"}})],1),_c('b-form-group',[_c('b-checkbox',{model:{value:(_vm.useFiltration),callback:function ($$v) {_vm.useFiltration=$$v},expression:\"useFiltration\"}},[_vm._v(\"Использовать фильтрацию\")])],1),(_vm.sourcePoints.length)?_c('div',{staticClass:\"mb-3\"},[_c('h5',[_vm._v(\"Точки на исходном изображении\")]),_vm._l((_vm.sourcePoints),function(point){return _c('div',{key:((point.x) + \":\" + (point.y)),staticClass:\"input-group input-group-sm\"},[_vm._m(0,true),_c('b-form-input',{attrs:{\"type\":\"number\"},model:{value:(point.x),callback:function ($$v) {_vm.$set(point, \"x\", $$v)},expression:\"point.x\"}}),_c('b-form-input',{attrs:{\"type\":\"number\"},model:{value:(point.y),callback:function ($$v) {_vm.$set(point, \"y\", $$v)},expression:\"point.y\"}}),_vm._m(1,true)],1)})],2):_vm._e(),(_vm.resultPoints.length)?_c('div',{staticClass:\"mb-3\"},[_c('h5',[_vm._v(\"Точки на итоговом изображении\")]),_vm._l((_vm.resultPoints),function(point){return _c('div',{key:((point.x) + \":\" + (point.y)),staticClass:\"input-group input-group-sm\"},[_vm._m(2,true),_c('b-form-input',{attrs:{\"type\":\"number\"},model:{value:(point.x),callback:function ($$v) {_vm.$set(point, \"x\", $$v)},expression:\"point.x\"}}),_c('b-form-input',{attrs:{\"type\":\"number\"},model:{value:(point.y),callback:function ($$v) {_vm.$set(point, \"y\", $$v)},expression:\"point.y\"}}),_vm._m(3,true)],1)})],2):_vm._e()],1),_c('b-tabs',{staticClass:\"col-sm-4 col-md-5 col-lg-7 col-xl-9 full-height-tabs p-0\",attrs:{\"pills\":\"\",\"nav-wrapper-class\":\"bg-dark\",\"active-nav-item-class\":\"text-dark bg-secondary border-0 mb-0\",\"nav-item-class\":\"text-white border-0\"}},[_c('b-tab',{attrs:{\"title\":\"Исходое ихображение\",\"title-link-class\":\"text-white\"}},[_c('div',{staticClass:\"h-100 bg-secondary canvas-container\"},[_c('canvas',{attrs:{\"id\":_vm.sourceCanvasId},on:{\"click\":_vm.onSourceCanvasClicked}})])]),_c('b-tab',{attrs:{\"title\":\"Итоговое\",\"title-link-class\":\"text-white\"}},[_c('div',{staticClass:\"h-100 bg-secondary canvas-container\"},[_c('canvas',{attrs:{\"id\":_vm.resultCanvasId}})])])],1)],1)])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"input-group-prepend\"},[_c('div',{staticClass:\"input-group-text\"},[_vm._v(\"X:\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"input-group-append\"},[_c('div',{staticClass:\"input-group-text\"},[_vm._v(\":Y\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"input-group-prepend\"},[_c('div',{staticClass:\"input-group-text\"},[_vm._v(\"X:\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"input-group-append\"},[_c('div',{staticClass:\"input-group-text\"},[_vm._v(\":Y\")])])}]\n\nexport { render, staticRenderFns }","export const nameOf = <T>(name: Extract<keyof T, string>): string => name;","// http://mathhelpplanet.com/static.php?p=javascript-operatsii-nad-matritsami\r\n\r\n/** Умножить матрицу на число */\r\nexport function multiplyMatrixToNumber(M: number[][], a: number): number[][] {\r\n    return M.map(v => v.map(x => a * x));\r\n}\r\n/** Перемножить матрицы */\r\nexport function multiplyMatrixToMatrix(A: number[][], B: number[][]): number[][] {\r\n    const rowsA = B.length;\r\n    const colsA = B[0].length;\r\n    const rowsB = A.length;\r\n    const colsB = A[0].length;\r\n    if (colsA != rowsB) throw \"Невозможно перемножить матрицы\";\r\n\r\n    const C = [] as number[][];\r\n    for (let i = 0; i < rowsA; i++) C[i] = [];\r\n\r\n    for (let k = 0; k < colsB; k++) {\r\n        for (let i = 0; i < rowsA; i++) {\r\n            let t = 0;\r\n            for (let j = 0; j < rowsB; j++)\r\n                t += B[i][j] * A[j][k];\r\n            C[i][k] = t;\r\n        }\r\n    }\r\n    return C;\r\n}\r\n\r\n/** Возвести матрицу в целочисленную положительную степень */\r\nexport function powMatrix(M: number[][], n: number): number[][] {\r\n    return n != 1\r\n        ? multiplyMatrixToMatrix(powMatrix(M, n - 1), M)\r\n        : M;\r\n}\r\n\r\n/** Получить присоединённую матрицу */\r\nexport function getAdjugateMatrix(M: number[][]): number[][] {\r\n    const N = M.length;\r\n    const adjA = [] as number[][];\r\n    for (let i = 0; i < N; i++) {\r\n        adjA[i] = [];\r\n        for (let j = 0; j < N; j++) {\r\n            const B = [] as number[][];\r\n            const sign = ((i + j) % 2 == 0) ? 1 : -1;\r\n            for (let m = 0; m < j; m++) {\r\n                B[m] = [];\r\n                for (let n = 0; n < i; n++) B[m][n] = M[m][n];\r\n                for (let n = i + 1; n < N; n++) B[m][n - 1] = M[m][n];\r\n            }\r\n            for (let m = j + 1; m < N; m++) {\r\n                B[m - 1] = [];\r\n                for (let n = 0; n < i; n++) B[m - 1][n] = M[m][n];\r\n                for (let n = i + 1; n < N; n++) B[m - 1][n - 1] = M[m][n];\r\n            }\r\n            adjA[i][j] = sign * getDeterminant(B);\r\n        }\r\n    }\r\n    return adjA;\r\n}\r\n\r\n/** Получить детерминант.\r\n *\r\n * Используется алгоритм Барейса, сложность O(n^3)\r\n * */\r\nexport function getDeterminant(A:number[][]): number {\r\n    const N = A.length;\r\n    const B = [] as number[][];\r\n    let denom = 1;\r\n    let exchanges = 0;\r\n    for (let i = 0; i < N; ++i) {\r\n        B[i] = [];\r\n        for (let j = 0; j < N; ++j) B[i][j] = A[i][j];\r\n    }\r\n    for (let i = 0; i < N - 1; ++i) {\r\n        let maxN = i, maxValue = Math.abs(B[i][i]);\r\n        for (let j = i + 1; j < N; ++j) {\r\n            const value = Math.abs(B[j][i]);\r\n            if (value > maxValue) {\r\n                maxN = j;\r\n                maxValue = value;\r\n            }\r\n        }\r\n        if (maxN > i) {\r\n            const temp = B[i];\r\n            B[i] = B[maxN];\r\n            B[maxN] = temp;\r\n            ++exchanges;\r\n        } else {\r\n            if (maxValue == 0) return maxValue;\r\n        }\r\n        const value1 = B[i][i];\r\n        for (let j = i + 1; j < N; ++j) {\r\n            const value2 = B[j][i];\r\n            B[j][i] = 0;\r\n            for (let k = i + 1; k < N; ++k) B[j][k] = (B[j][k] * value1 - B[i][k] * value2) / denom;\r\n        }\r\n        denom = value1;\r\n    }\r\n    if (exchanges % 2) return -B[N - 1][N - 1];\r\n    else return B[N - 1][N - 1];\r\n}\r\n\r\n/** Получить обратную матрицу\r\n * @return {number[][]|null} Найденная обратная матрица или null, если детерминант == 0\r\n */\r\nexport function getInverseMatrix(M: number[][]): number[][]|null {\r\n    const det = getDeterminant(M);\r\n    if (det == 0) return null;\r\n    const N = M.length;\r\n    M = getAdjugateMatrix(M);\r\n    for (let i = 0; i < N; i++) {\r\n        for (let j = 0; j < N; j++) M[i][j] /= det;\r\n    }\r\n    return M;\r\n}","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nimport {Component, Vue, Watch} from \"vue-property-decorator\";\r\nimport {saveBlobAsFile} from \"@/Utils/Files\";\r\nimport Vector2 from \"@/Utils/Vector2\";\r\nimport {nameOf} from \"@/Utils/Others\";\r\nimport {getInverseMatrix, multiplyMatrixToMatrix} from \"@/Utils/Matrix\";\r\n\r\n@Component\r\nexport default class Lab2 extends Vue {\r\n    //#region Канвасы\r\n\r\n    // Id должны быть уникальными,\r\n    // иначе компонент будет работать не с тем элементом\r\n    /** Id канваса с исходным изображением */\r\n    readonly sourceCanvasId = \"lab2-source-canvas\";\r\n    readonly resultCanvasId = \"lab2-result-canvas\";\r\n    useFiltration = true;\r\n\r\n    get sourceCanvas() : HTMLCanvasElement {\r\n        return document.getElementById(this.sourceCanvasId)! as HTMLCanvasElement;\r\n    }\r\n\r\n    get resultCanvas() : HTMLCanvasElement {\r\n        return document.getElementById(this.resultCanvasId)! as HTMLCanvasElement;\r\n    }\r\n\r\n    onSourceCanvasClicked(ev: MouseEvent) : void {\r\n        const canvas = this.sourceCanvas;\r\n        const domRect = canvas.getBoundingClientRect();\r\n        const x = ev.clientX - domRect.left;\r\n        const y = ev.clientY - domRect.top;\r\n\r\n        if(this.sourceMode)\r\n            this.addSourcePoint(new Vector2(x, y))\r\n        else\r\n            this.addResultPoint(new Vector2(x, y))\r\n    }\r\n\r\n    resizeCanvas(width: number, height: number) : void {\r\n        const canvas = this.sourceCanvas\r\n        const scaleX = width / canvas.width;\r\n        const scaleY = height / canvas.height;\r\n\r\n        for (const point of this.sourcePoints) {\r\n            point.x *= scaleX;\r\n            point.y *= scaleY;\r\n        }\r\n\r\n        for (const point of this.resultPoints) {\r\n            point.x *= scaleX;\r\n            point.y *= scaleY;\r\n        }\r\n\r\n        canvas.height = height;\r\n        canvas.width = width;\r\n\r\n        this.redraw();\r\n    }\r\n\r\n    //#endregion\r\n\r\n    //#region Исходное изображение\r\n\r\n    public sourceImageFile: File|null = null;\r\n    public sourceImage: HTMLImageElement|null = null;\r\n    public imageIsLoaded = false;\r\n\r\n    @Watch(nameOf<Lab2>(\"sourceImageFile\"))\r\n    onSourceImageFileChanged(newFile: File|null) : void {\r\n        // Высвобождаем object URL\r\n        if(this.imageIsLoaded) {\r\n            URL.revokeObjectURL(this.sourceImage!.src);\r\n        }\r\n\r\n        this.imageIsLoaded = false;\r\n        this.sourceImage = null;\r\n\r\n        if(!newFile) {\r\n            this.redraw();\r\n            return;\r\n        }\r\n\r\n        let newImage = new Image;\r\n        this.sourceImage = newImage;\r\n        newImage.src = URL.createObjectURL(newFile);\r\n        newImage.onload = () => {\r\n            // Если файл изображения сменился, пока грузилось это,\r\n            // то надо высвободить object URL\r\n            if(this.sourceImage !== newImage) {\r\n                URL.revokeObjectURL(newImage.src);\r\n                return;\r\n            }\r\n\r\n            this.resizeCanvas(newImage.width, newImage.height);\r\n            this.imageIsLoaded = true;\r\n            this.redraw()\r\n        }\r\n    }\r\n\r\n    //#endregion\r\n\r\n    //#region Итоговое изображение\r\n\r\n    calculateResultImage():void {\r\n        if(this.sourcePoints.length < 3 || this.resultPoints.length < 3)\r\n            throw \"Недостаточно точек\";\r\n\r\n        this.drawSourceImage();\r\n\r\n        // https://www.school30.spb.ru/cgsg/cgc2018/CGC2018_03_CGMath.pdf\r\n        // 17 слайд\r\n\r\n        const G = [\r\n            this.sourcePoints.map(v => v.x),\r\n            this.sourcePoints.map(v => v.y),\r\n            [1, 1, 1]\r\n        ];\r\n        const G1 = [\r\n            this.resultPoints.map(v => v.x),\r\n            this.resultPoints.map(v => v.y),\r\n            [1, 1, 1]\r\n        ];\r\n        const inverseG1 = getInverseMatrix(G1)!;\r\n        const inverseG = getInverseMatrix(G)!;\r\n        /** Матрица преобразования координат целевого изображения\r\n         *  в координаты исходного */\r\n        const inverseA = multiplyMatrixToMatrix(inverseG1, G);\r\n        /** Матрица преобразования координат исходного изображения\r\n         *  в координаты целевого */\r\n        const A = multiplyMatrixToMatrix(inverseG, G1);\r\n        console.log({G, G1, inverseG, inverseG1, A, inverseA})\r\n\r\n        const sourceCanvas = this.sourceCanvas;\r\n        const sourceWidth = sourceCanvas.width;\r\n        const sourceHeight = sourceCanvas.height;\r\n\r\n        const sourceCorners = [\r\n            [0, sourceHeight-1, 1], [sourceWidth-1, sourceHeight-1, 1],\r\n            [0, 0, 1], [sourceWidth, 0, 1]\r\n        ];\r\n\r\n        const mappedSourceCorners = sourceCorners\r\n            .map(corner => multiplyMatrixToMatrix(corner.map(c => [c]), A).map(c => c[0]))\r\n            .map(v => v.map(Math.round));\r\n\r\n        const resultBounds = {\r\n            maxX: mappedSourceCorners.reduce((prev, v) => Math.max(prev, v[0]), -Infinity),\r\n            maxY: mappedSourceCorners.reduce((prev, v) => Math.max(prev, v[1]), -Infinity),\r\n            minX: mappedSourceCorners.reduce((prev, v) => Math.min(prev, v[0]), Infinity),\r\n            minY: mappedSourceCorners.reduce((prev, v) => Math.min(prev, v[1]), Infinity)\r\n        };\r\n\r\n        const resultCanvas = this.resultCanvas;\r\n        const resultCanvasOffset = [resultBounds.minX, resultBounds.minY];\r\n        const resultWidth = resultBounds.maxX - resultBounds.minX;\r\n        const resultHeight = resultBounds.maxY - resultBounds.minY;\r\n\r\n        resultCanvas.width = resultWidth;\r\n        resultCanvas.height = resultHeight;\r\n\r\n\r\n        const sourceContext = sourceCanvas.getContext('2d')!;\r\n        const sourceImageData =  sourceContext.getImageData(0, 0, sourceWidth, sourceHeight);\r\n\r\n        const resultContext = resultCanvas.getContext('2d')!;\r\n        const resultImageData = resultContext.getImageData(0, 0, resultWidth, resultHeight);\r\n\r\n\r\n        /** Получить индекс начала пикселя в исходном изображении */\r\n        const getSourceI = (x: number, y: number) => y * (sourceWidth * 4) + x * 4;\r\n        /** Получить индекс начала пикселя в итоговом изображении */\r\n        const getResultI = (x: number, y: number) => y * (resultWidth * 4) + x * 4;\r\n\r\n        for(let x = 0; x < resultWidth; x++) {\r\n            for (let y = 0; y < resultHeight; y++) {\r\n                const resultX = x + resultCanvasOffset[0];\r\n                const resultY = y + resultCanvasOffset[1];\r\n                const resultPoints = [\r\n                    [resultX, resultX + 1, resultX],\r\n                    [resultY, resultY, resultY + 1],\r\n                    [1, 1, 1, 1]\r\n                ];\r\n                const sourcePoints = multiplyMatrixToMatrix(resultPoints, inverseA);\r\n                let [sourceX, sourceY] = sourcePoints.map(v => v[0]);\r\n\r\n                /** Коэффициент уменьшения изображения по x */\r\n                const xK = new Vector2(sourceX, sourceY).subtract(new Vector2(sourcePoints[0][1], sourcePoints[1][1]))\r\n                    .length;\r\n                /** Коэффициент уменьшения изображения по y */\r\n                const yK = new Vector2(sourceX, sourceY).subtract(new Vector2(sourcePoints[0][2], sourcePoints[1][2]))\r\n                    .length;\r\n                /** Коэффициент уменьшения изображения */\r\n                const k = (xK+yK)/2;\r\n\r\n                /** Индекс начала пикселя в итоговом изображении */\r\n                const resultI = getResultI(x, y);\r\n                if(!this.useFiltration) {\r\n                    sourceX = Math.round(sourceX);\r\n                    sourceY = Math.round(sourceY);\r\n\r\n                    if (sourceX < 0 || sourceX >= sourceWidth\r\n                        || sourceY < 0 || sourceY >= sourceHeight) {\r\n                        continue;\r\n                    }\r\n\r\n                    const sourceI = getSourceI(sourceX, sourceY);\r\n\r\n                    resultImageData.data[resultI] = sourceImageData.data[sourceI];\r\n                    resultImageData.data[resultI+1] = sourceImageData.data[sourceI+1];\r\n                    resultImageData.data[resultI+2] = sourceImageData.data[sourceI+2];\r\n                    resultImageData.data[resultI+3] = sourceImageData.data[sourceI+3];\r\n                } else if (k < 1) {\r\n                    // Билинейная фильтрация\r\n                    const arr = [\r\n                        [Math.floor(sourceX), Math.floor(sourceY)],\r\n                        [Math.ceil(sourceX), Math.floor(sourceY)],\r\n                        [Math.floor(sourceX), Math.ceil(sourceY)],\r\n                        [Math.ceil(sourceX), Math.ceil(sourceY)]\r\n                    ];\r\n                    for (let v of arr) {\r\n                        if (v[0] < 0 || v[0] >= sourceWidth || v[1] < 0 || v[1] >= sourceHeight) {\r\n                            v[0] = 0;\r\n                            v[1] = 0;\r\n                            v[2] = 0;\r\n                        } else {\r\n                            v[2] = (1 - Math.abs(v[0] - sourceX)) * (1 - Math.abs(v[1] - sourceY));\r\n                        }\r\n                    }\r\n\r\n                    for (let i = 0; i < 4; i++) {\r\n                        resultImageData.data[resultI+i] =\r\n                            sourceImageData.data[getSourceI(arr[0][0], arr[0][1])+i] * arr[0][2] +\r\n                            sourceImageData.data[getSourceI(arr[1][0], arr[1][1])+i] * arr[1][2] +\r\n                            sourceImageData.data[getSourceI(arr[2][0], arr[2][1])+i] * arr[2][2] +\r\n                            sourceImageData.data[getSourceI(arr[3][0], arr[3][1])+i] * arr[3][2];\r\n                    }\r\n                } else {\r\n                    //Трилинейная фильтрация\r\n                    if (sourceX < 0 || sourceX >= sourceWidth\r\n                        || sourceY < 0 || sourceY >= sourceHeight) {\r\n                        continue;\r\n                    }\r\n\r\n                    const m = Math.pow(2, Math.floor(Math.log2(k)));\r\n                    const m2 = 2*m;\r\n                    const flooredSourceXm = Math.floor(sourceX/m) * m;\r\n                    const flooredSourceYm = Math.floor(sourceY/m) * m;\r\n                    const flooredSourceXm2 = Math.floor(sourceX/m2) * m2;\r\n                    const flooredSourceYm2 = Math.floor(sourceY/m2) * m2;\r\n                    for (let i = 0; i < 4; i++) {\r\n                        let colorM = 0;\r\n                        for (let j = 0; j < m; j++) {\r\n                            for (let l = 0; l < m; l++) {\r\n                                const index = getSourceI(\r\n                                    flooredSourceXm + j,\r\n                                    flooredSourceYm + l\r\n                                );\r\n                                colorM += sourceImageData.data[i + index];\r\n                            }\r\n                        }\r\n                        colorM /= m*m;\r\n                        let colorM2 = 0;\r\n                        for (let j = 0; j < m2; j++) {\r\n                            for (let l = 0; l < m2; l++) {\r\n                                colorM2 += sourceImageData.data[i + getSourceI(\r\n                                    flooredSourceXm2 + j,\r\n                                    flooredSourceYm2 + l\r\n                                )]\r\n                            }\r\n                        }\r\n                        colorM2 /= m2*m2;\r\n                        resultImageData.data[resultI+i] = (colorM*(m2-k) + colorM2*(k-m))/m;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        this.redraw();\r\n        resultContext.putImageData(resultImageData, 0, 0);\r\n    }\r\n\r\n    //#endregion\r\n\r\n    //#region Рисование\r\n\r\n    redraw(): void {\r\n        this.drawSourceImage();\r\n\r\n        this.drawPoints();\r\n    }\r\n\r\n    drawSourceImage() : void {\r\n        const canvas = this.sourceCanvas;\r\n        const context = canvas.getContext('2d')!;\r\n\r\n        context.fillStyle = \"white\";\r\n        context.fillRect(0, 0, canvas.width, canvas.height);\r\n\r\n        if(this.imageIsLoaded) context.drawImage(\r\n            this.sourceImage!,\r\n            0, 0, this.sourceImage!.width, this.sourceImage!.height,\r\n            0, 0, canvas.width, canvas.height\r\n        );\r\n    }\r\n\r\n    drawPoint(point: Vector2, canvas: HTMLCanvasElement,\r\n              options?: {color?: string, radius? :number}\r\n    ) : void {\r\n        const radius = options?.radius || 5;\r\n        const color = options?.color || 'red';\r\n        const context = canvas.getContext('2d')!;\r\n\r\n        context.strokeStyle = color;\r\n        context.beginPath();\r\n        context.arc(point.x, point.y, radius, 0, Math.PI*2, false);\r\n        context.closePath();\r\n        context.stroke();\r\n    }\r\n\r\n    drawPoints(): void {\r\n        for (const point of this.sourcePoints) {\r\n            this.drawPoint(point, this.sourceCanvas);\r\n        }\r\n        for (const point of this.resultPoints) {\r\n            this.drawPoint(point, this.sourceCanvas, {color: 'blue'});\r\n        }\r\n    }\r\n\r\n    //#endregion\r\n\r\n    //#region Точки\r\n\r\n    sourcePoints: Vector2[] = [];\r\n    resultPoints: Vector2[] = [];\r\n    sourceMode = true;\r\n\r\n    addSourcePoint(point: Vector2): void {\r\n        if(this.sourcePoints.length >= 3) this.sourcePoints.shift();\r\n        this.sourcePoints.push(point);\r\n    }\r\n\r\n    addResultPoint(point: Vector2): void {\r\n        if(this.resultPoints.length >= 3) this.resultPoints.shift();\r\n        this.resultPoints.push(point);\r\n    }\r\n\r\n    deletePoints(): void {\r\n        this.sourcePoints = [];\r\n        this.resultPoints = [];\r\n        this.redraw();\r\n    }\r\n\r\n    @Watch(nameOf<Lab2>(\"resultPoints\"), {deep: true})\r\n    @Watch(nameOf<Lab2>(\"sourcePoints\"), {deep: true})\r\n    onSourcePointsChanged(): void {\r\n        console.log(\"На изменении массива точек\")\r\n        this.redraw()\r\n    }\r\n\r\n    //#endregion\r\n\r\n    //#region Сохранение изображения\r\n    saveImage() : void {\r\n        let canvas = this.resultCanvas;\r\n        canvas.toBlob((blob) => {\r\n            if(!blob) return;\r\n            saveBlobAsFile(blob, \"CG result\");\r\n        });\r\n    }\r\n    //#endregion\r\n\r\n    mounted() : void {\r\n        const canvas = this.sourceCanvas;\r\n        canvas.height = 512;\r\n        canvas.width = 512;\r\n\r\n        this.redraw();\r\n    }\r\n}\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Lab2.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Lab2.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./Lab2.vue?vue&type=template&id=cad9496e&\"\nimport script from \"./Lab2.vue?vue&type=script&lang=ts&\"\nexport * from \"./Lab2.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./Lab2.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nimport {Component, Vue} from 'vue-property-decorator';\r\nimport Lab0 from \"@/components/Lab0.vue\";\r\nimport Lab1 from \"@/components/Lab1.vue\";\r\nimport Lab2 from \"@/components/Lab2.vue\";\r\n\r\n@Component({\r\n    components: {\r\n        Lab2,\r\n        Lab1,\r\n        Lab0\r\n    }\r\n})\r\nexport default class App extends Vue {}\r\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--14-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/ts-loader/index.js??ref--14-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--14-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/ts-loader/index.js??ref--14-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=88bafee4&\"\nimport script from \"./App.vue?vue&type=script&lang=ts&\"\nexport * from \"./App.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import Vue from 'vue'\r\nimport BootstrapVue from \"bootstrap-vue\";\r\nimport \"./index.scss\"\r\nimport App from './App.vue'\r\n\r\nVue.config.productionTip = false\r\n\r\nVue.use(BootstrapVue);\r\n\r\nnew Vue({\r\n  render: h => h(App),\r\n}).$mount('#app')\r\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Lab2.vue?vue&type=style&index=0&lang=scss&\""],"sourceRoot":""}